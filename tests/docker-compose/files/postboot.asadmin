# LOGGING ATTRIBUTES: https://docs.payara.fish/enterprise/docs/documentation/payara-server/logging/logging.html
set-log-attributes com.sun.enterprise.server.logging.GFFileHandler.logtoFile='false'
set-log-attributes com.sun.enterprise.server.logging.GFFileHandler.formatter='fish.payara.enterprise.server.logging.JSONLogFormatter'
set-log-attributes com.sun.enterprise.server.logging.GFFileHandler.rotationLimitInBytes=5000000
set-log-attributes com.sun.enterprise.server.logging.GFFileHandler.compressOnRotation='true'

# DEPLOY SUPPORTING APPLICATIONS
deploy --type osgi /tmp/payara-logback-delegation.jar
deploy --forcename --name activemq-rar --type rar /tmp/activemq-rar.rar

# CONFIGURE ACTIVEMQ ADAPTER
create-resource-adapter-config   --property ServerUrl="tcp\://activemq\:61616":UserName="system":Password="manager" activemq-rar
create-connector-connection-pool --raname activemq-rar --connectiondefinition javax.jms.ConnectionFactory --ping true --isconnectvalidatereq true jms/MQPool
create-connector-resource        --poolname jms/MQPool jms/ConnectionFactory
create-admin-object              --raname activemq-rar --restype javax.jms.Queue --property PhysicalName=Example jms/Example

# DEPLOY java-web-project.war
deploy --force=true /tmp/java-web-project.war
